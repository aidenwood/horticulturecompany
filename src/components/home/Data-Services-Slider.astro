---
/* Import the Services JS Data file */
import { services } from '../../content/services-detailed.js'; // Changed import

// Helper function to format price remains the same
const formatPrice = (price) => {
  if (typeof price === 'string' && price.startsWith('From')) {
    return price;
  }
  return `$${price}`;
};
---


<!-- CSS -->
<link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css">

<!-- JavaScript -->
<script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>

<style>
  .main-carousel { width: 100%; }
  .main-carousel.is-expanded { width: 100%; }
  
  .carousel-cell {
  width: calc(25% - 25px);
  margin: 15px;
  min-height: fit-content;
  display: flex;
  flex-direction: column;
  justify-items: center;
  text-align: left;
}

@media screen and (max-width: 1920px) {
  .carousel-cell {
    width: calc(30% - 30px);
  }
}

@media screen and (max-width: 1440px) {
  .carousel-cell {
    width: calc(33% - 30px);
  }
}

@media screen and (max-width: 1199px) {
  .carousel-cell {
    width: calc(50% - 45px);
  }
}
@media screen and (max-width: 968px) {
  .carousel-cell {
    width: calc(65% - 20px);
  }
}


@media screen and (max-width: 768px) {
  .carousel-cell {
    width: 75%;
  }
}

@media screen and (max-width: 568px) {
  .carousel-cell {
    width: calc(100% - 15px);
  }
}

.flickity-viewport {
  transition: height 1.5s;
}

  #contain { max-width: 1980px !important; }
  
  /* Image cover settings for consistent sizing */
  .image-cover {
    width: 100%;
    height: 220px; /* Increased height for larger images */
    position: relative;
    overflow: hidden;
    margin-bottom: 1rem;
  }

  @media screen and (max-width: 768px) {
  .image-cover {
    height: 180px;
  }
}
  
  .image-cover img {
    width: 100%;
    height: 100%;
    min-height: 220px;
    object-fit: cover; /* This makes the image cover the entire container */
    object-position: center; /* Centers the image within the container */
  }
  
  /* Badge styles */
  .badge {
    display: inline-block;
    padding: 0.25rem 0.5rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 500;
    margin-right: 0.25rem;
    margin-bottom: 0.25rem;
  }


  
  .badge-primary {
    background-color: rgba(var(--color-primary-500), 0.1);
    color: rgb(var(--color-primary-700));
  }
  /* Title tag styles */
  .title-tag {
    position: absolute;
    bottom: 1rem;
    left: 1.5rem;
    background-color: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 0.25rem 0.75rem;
    border-radius: 0.5rem;
    font-weight: 600;
    z-index: 10;
  }

  @media screen and (max-width: 768px) {
  .title-tag {
    left: 0.75rem;
    bottom: 0.5rem;
  }
}

  /* Price tag styles */
  .price-tag {
    position: absolute;
    top: 1rem;
    right: 1.5rem;
    background-color: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 0.25rem 0.75rem;
    border-radius: 0.5rem;
    font-weight: 300;
    z-index: 10;
  }

  @media screen and (max-width: 768px) {
  .price-tag {
    right: 0.75rem;
    top: 0.75rem;
  }
}
  
  /* Specification list styles */
  .spec-list {
    font-size: 0.8rem;
    color: rgba(255, 255, 255, 0.8);
    margin-top: 0.5rem;
  }
  
  .spec-list li {
    margin-bottom: 0.25rem;
    display: flex;
    align-items: center;
  }
  
  .spec-list li:before {
    content: "â€¢";
    margin-right: 0.5rem;
    color: rgb(var(--color-primary-500));
  }
  
  /* Card styles */
  .product-card {
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
  }
  
  .product-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
  }
  
  .card-content {
    flex: 1;
    display: flex;
    flex-direction: column;
  }
  
  .card-footer {
    margin-top: auto;
    padding-top: 1rem;
  }
</style>
<section class="my-24">
  <div id="contain" class="mx-auto w-full">
    <div id="border" class="">
      <div class="flex flex-col gap-4 px-4 lg:px-8">
        <h3 class="text-base lg:text-lg uppercase font-thin tracking-widest">
          Professional Event Services
        </h3>
        <h4 class="text-3xl sm:text-4xl font-medium tracking-tight">
          Our Services
        </h4>
        <p class="max-w-6xl text-lg xs:text-xl">
          Comprehensive event production services including technical design, AV integration, and full production management by certified professionals.
        </p>
      </div>
      <div class="fullscreen-carousel gap-6 px-4 lg:px-8 py-4" data-flickity='{ "adaptiveHeight": true, "cellAlign": "center", "contain": true, "pageDots": false, "prevNextButtons": false, "lazyLoad": true, "imagesLoaded": true, "adaptiveHeight": true }'>
        {
          services.map((service) => (
            <div class="carousel-cell product-card rounded-3xl text-secondary-950 dark:text-secondary-100 bg-secondary-400/10 hover:bg-secondary-600/20 dark:bg-secondary-800/40 dark:hover:bg-secondary-600/50 border-primary-900/10 dark:border-primary-300/10 duration-200 border overflow-hidden">
              <div class="relative">
                <div class="image-cover">
                  <img src={service.img} alt={service.alt} />
                  {service.packages && service.packages[0] && (
                    <div class="price-tag">From {formatPrice(service.packages[0].price)}</div>
                  )}
                  <h2 class="title-tag text-xl lg:text-xl font-medium mb-2">{service.name}</h2>
                </div>
              </div>
              
              <div class="card-content px-4 md:px-6">
                {service.packages && (
                  <div class="mb-2">
                    <h3 class="text-ms font-semibold mb-2">Available Packages</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 text-sm">
                      {service.packages.slice(0, 2).map((pkg) => (
                        <div class="bg-secondary-300/30 rounded-md mr-2 p-2 mb-1">
                          <p class="text-md md:text-sm font-medium">{pkg.name}</p>
                          <p class="text-lg md:text-xl lg:text-2xl font-thin">{formatPrice(pkg.price)}</p>
                        </div>
                      ))}
                      {service.packages.length > 2 && (
                        <div class="text-md">+{service.packages.length - 2} more options</div>
                      )}
                    </div>
                  </div>
                )}

                {service.commonUses && (
                  <div class="">
                    <h3 class="text-md font-semibold mb-2">Popular For</h3>
                    <div class="flex flex-wrap">
                      {service.commonUses.slice(0, 4).map((use) => (
                        <span class="badge badge-primary text-xs bg-secondary-300/30 text-secondary-950 rounded-md">{use}</span>
                      ))}
                    </div>
                  </div>
                )}
                
                <div class="card-footer">
                  <a href={service.link} class="text-white bg-primary-600 inline-flex items-center justify-center rounded-full mb-4 px-4 xs:px-5 py-3 text-sm xl:text-base font-semibold">
                    View Details
                  </a>
                </div>
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</section>